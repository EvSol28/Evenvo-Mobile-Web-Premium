workflows:
  ios-workflow:
    name: iOS Build
    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - flutter clean
      - flutter pub get
      - cd ios && pod install
      - echo "Configuring Xcode build settings"
      - sed -i '' 's/INCLUDED_INHERITED=NO/INCLUDED_INHERITED=YES/' ios/Flutter/Release.xcconfig
      - echo "Starting IPA build"
      - flutter build ios --no-codesign --release
      - echo "IPA build completed"
    artifacts:
      - build/ios/iphoneos/*.ipa